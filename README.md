# Simple and minimalist fake blog - UE L311 - Semaine 4 - Groupe G

## üìö Sommaire

- üë• [Membres du groupe](#membres-du-groupe)
- üéØ [Objectifs](#objectifs)
- ü§ù [Travail collaboratif](#travail-collaboratif)
  - üõ†Ô∏è [Outils](#outils)
  - üìã [Principe g√©n√©ral](#principe-g√©n√©ral)
- üóìÔ∏è [Planning de la semaine](#planning-de-la-semaine)
- üêû [M√©thodes de d√©bogage](#m√©thodes-de-d√©bogage)
- üóÉÔ∏è [Typologie des erreurs](#typologie-des-erreurs)
  - üìÑ [Fichiers](#fichiers)
  - üß© [Syntaxe](#syntaxe)
  - üî° [Typographie](#typographie)
  - üìê [Logique](#logique)
  - üîê [S√©curit√©](#s√©curit√©)
- üß™ [Tests fonctionnels manuels](#tests-fonctionnels-manuels)
- üìà [Bilan](#bilan)

## Membres du groupe

| Etudiant.e  |   Alias    |     Branche     | D√©ploy√© sur |
| :---------: | :--------: | :-------------: | :-------------: |
| Mathilde C. | Clouddy23  | bugfix/mathilde |                 |
|   Kamo G.   | Spaghette5 |   bugfix/kamo   |                 |
| Mathieu L.  |  mathleys  | bugfix/mathieu  |                 |
| Filippos K. |  filkat34  | bugfix/filippos | [https://katsanos1.hosting.unilim.fr/git/GroupeG-S4-L311-2025/index.php](https://katsanos1.hosting.unilim.fr/git/GroupeG-S4-L311-2025/index.php)|

## Objectifs

- [x] Mobiliser les m√©thodes de d√©boggage de code PHP abord√©es en classe virtuelle pour rendre le site d'un blog fonctionnel.
- [x] Savoir utiliser le client git et la plateforme Github en vue de collaborer au sein d'une √©quipe de d√©veloppement.

## Travail collaboratif

### Outils

Le principal outil de collaboration utilis√© est Github. Nous avons clon√© le d√©p√¥t fourni et chaque membre de l'√©quipe a cr√©√© sa propre branche pour pouvoir travailler ind√©pendamment. Nous avons √©galement utilis√© Teams pour faire une visio de code review.

### Principe g√©n√©ral

Le projet a √©t√© clon√© sur un d√©p√¥t public github. Chaque membre a cr√©√© sa branche, proc√©d√© aux corrections jug√©es n√©cessaires sur celle-ci avant de faire une demande de tirage. Une visio de "Code review" est pr√©vue en fin de semaine afin d'√©changer autour des probl√®mes identifi√©s, corriger et harmoniser les approches.

## Planning de la semaine

| Dates       | Objectif                                                                                                                                                          |
| :---------- | :---------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 20/10-24/10 | **P√©riode de d√©bogage** dans la branche de chaque d√©veloppeur : _bugfix/nomdudev_                                                                                 |
| 24/10       | **Code review en visio** pour discussion autour des pull requests, merge dans main et **finalisation de la r√©daction du CR** dans le README.md de la branche main |

## M√©thodes de d√©bogage

Pour identifier et corriger les probl√®mes, plusieurs m√©thodes de debug ont √©t√© employ√©es.

### Xdebug
L'essentiel des bugs a √©t√© identifi√© gr√¢ce √† l'outil _Xdebug_ qui fournit des informations tr√®s pr√©cises sur l'origine des erreurs. Ci-dessous, un rapide tuto pour la mise en place de _Xdebug_ sur l'environnement docker puis, √† titre d'exemples quelques captures d'√©cran concernant trois types d'erreurs diff√©rents.

#### Mise en place de Xdebug sur la pile LAMP de l'environnement docker (Hosting)

##### Installation
`apt-get install php-xdebug`

##### Cr√©ation d'une page d'informations sur Xdebug
Cr√©ation d'un fichier `xdebug_info.php` dans lequel il faut appeler la fonction `xdebug_info();` pour afficher les informations.

Une fois sur cette page, le diagnostic indique une erreur de configuration du port d'√©coute (par d√©faut √† 9003 inexistant sur la configuration docker donn√©e).

##### Trouver le chemin vers le fichier xdebug.ini

`php --ini` puis rep√©rer le chemin vers xdebug.ini (normalement `/etc/php/8.1/cli/conf.d/20-xdebug.ini`)

##### Trouver les adresses et ports d'apache sur la configuration hosting

`ss -tunlp` puis rep√©rer l'adresse(127.0.0.11) et le port (80) du serveur apache

##### Modifier le fichier _xdebug.ini_ en fonction

`nano /etc/php/8.1/cli/conf.d/20-xdebug.ini` puis dans le fichier renseigner l'adresse et le port du serveur apache :
`zend_extension=xdebug.so
xdebug.mode=develop
xdebug.start_with_request=yes
xdebug.client_port=80
xdebug.client_host=127.0.0.11`

#### Exemples de bugs identifi√©s par _Xdebug_
##### Une coquille sur le nom d'une variable

![erreur : Undefined variable](screenshots/xdebug1.png)

##### Une coquille dans le nom d'une fonction lors de son appel

![erreur : Undefined function](screenshots/xdebug2.png)

##### Une erreur de syntaxe confondant assignation et comparaison de variables

![erreur Parse error](screenshots/xdebug3.png)

### Affichage des erreurs dans le navigateur et journalisation des logs

L‚Äôaffichage des erreurs et la journalisation des logs ont √©t√© configur√©s √† deux niveaux compl√©mentaires. D‚Äôune part, via le php.ini, pour une capture et un affichage des erreurs sur l‚Äôensemble de l‚Äôenvironnement. D‚Äôautre part, de mani√®re locale directement dans les scripts PHP √† l‚Äôaide de ini_set et error_log (tracage cibl√© des logs et centralisation dans un fichier php_error.log).

### Configuration globale via le php.ini

![configuration php.ini](screenshots/Configuration%20logs%20php.ini.png)
![affichage d'erreur navigateur](screenshots/affichage%20log%20navigateur.png)

### Configuration locale du projet directement dans les scripts php

![activation affichage et enregistrement des logs](screenshots/Activation%20de%20l'affichage%20et%20de%20l'enregistrement.png)

### Inspecteur du navigateur

L'inspecteur du navigateur est toujours une r√©f√©rence pr√©cieuse lors des s√©ances de d√©bogage. Il a par exemple r√©v√©l√© une faille de s√©curit√© majeure : le login et mot de passe sont transmis en clair vers le serveur, ce qui rend possible leur interception.

![erreur : Credentials security breach](screenshots/credentialsExposed.png)

## Typologie des erreurs

Nous avons √©tabli ci-dessous une typologie des erreurs trouv√©es avec quelques exemples pour chacune d'entre elles. Il s'agit bien d'une typologie et non d'une liste exhaustive de toutes les erreurs corrig√©es.

### Fichiers

| Bug                                                     | Correction                                            | Explication                                                                                             |
| :------------------------------------------------------ | :---------------------------------------------------- | :------------------------------------------------------------------------------------------------------ |
| `define('DB_ARTICLES', TL_ROOT.'/dbal/articles.json');` | `define('DB_ARTICLES', TL_ROOT.'/db/articles.json');` | Correction du chemin de dossier de _/dbal/_ vers _db_ pour correspondre √† la structure r√©elle du projet |
| ` include 'inc/tpls-footer.php';`                       | ` include 'inc/tpl-footer.php'`                       | Correction du nom de fichier (suppression du 's')                                                       |
| `header('Location:indx.php') `                          | `header('Location:index.php')`                        | Correction du nom du fichier (ajout du 'e')                                                             |

### Syntaxe

| Bug                                            | Correction                                     | Explication                                                       |
| :--------------------------------------------- | :--------------------------------------------- | :---------------------------------------------------------------- |
| `function getArticleById($id_article == null)` | ` function getArticleById($id_article = null)` | Remplacement de l'op√©rateur de comparaison == par l'assignation = |
| `##$compteur++; `                              | ` $compteur++;`                                | Suppression du commentaire emp√™chant l‚Äôex√©cution du code          |

### Typographie

Les erreurs typographiques (fautes de frappe) ont √©t√© les plus nombreuses. Parmi celles-ci, on retrouve surtout des coquilles dans les noms des variables et des fonctions.

| Bug                                                     | Correction                                             | Explication                                                                          |
| :------------------------------------------------------ | :----------------------------------------------------- | :----------------------------------------------------------------------------------- |
| `<?php includ 'inc/inc.functions.php'; ?> `             | ` <?php include 'inc/inc.functions.php'; ?>`           | Ajout du _e_ √† _include_                                                             |
| ` if($_SERVER["RQUEST_METHOD"] == "POST"`               | ` if($_SERVER["REQUEST_METHOD"] == "POST")`            | Correction du nom de la variable superglobale (ajout du _e_ √† _REQUEST_              |
| ` sessions_destroy()`                                   | ` session_destroy()`                                   | Rectification de la faute de frappe dans l‚Äôappel de la fonction (suppression du _s_) |
| `<img src="<?php echo $art_icle['image'];?>" alt="" />` | `<img src="<?php echo $article['image'];?>" alt="" />` | Correction du nom de la variable (suppression du \_ )                                |

### Logique

| Bug                                                | Correction                                          | Explication                                                                                                                   |
| :------------------------------------------------- | :-------------------------------------------------- | :---------------------------------------------------------------------------------------------------------------------------- |
| `if(is_null($article) OR !!!!count($article))`     | `if(is_null($article) OR !count($article))`         | Simplification de la quadruple n√©gation !!!! qui vaut affirmation en simple n√©gation                                          |
| ` connectUser($_GET['login'], $_POST['password'])` | ` connectUser($_POST['login'], $_POST['password'])` | Correction de GET en POST car il s‚Äôagit d‚Äôenvoyer des donn√©es vers le serveur pour v√©rifier si les identifiants sont corrects |

### S√©curit√©

| Bug                                                       | Correction                                                                                                                                                                                                                                                                     | Explication                                                                                                                                                       |
| :-------------------------------------------------------- | :----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :---------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `define('LOGIN', 'UEL311');define('PASSWORD', 'U31311');` | Cr√©ation d'une table sp√©cifique dans le dossier _db_ simulant la base de donn√©es : `users.json` + Encodage en base64 du payload de la forme contenant le login et le mot de passe avant transmission au serveur : `document.getElementById('secure_data').value = btoa(data);` | L'identifiant et le mot de passe √©taient cod√©s en dur c√¥t√© serveur et transmis en clair depuis le client. L'encodage propos√© offre un niveau de s√©curit√© minimal. |

![encodage64](screenshots/base64.png)

## Tests fonctionnels manuels

| Fonctionnalit√©/Branche                                                                                                         | Mathilde | Kamo | Mathieu | Filippos |
| :----------------------------------------------------------------------------------------------------------------------------- | :------: | :--: | :-----: | :------: |
| La page d'accueil s'affiche sans erreurs PHP                                                                                   |    ‚úÖ    |  ‚úÖ  |   ‚úÖ    |    ‚úÖ    |
| Les CSS et JS se chargent correctement (pas d'erreurs 404 dans la console)                                                     |    ‚úÖ    |  ‚úÖ  |   ‚úÖ    |    ‚úÖ    |
| Les images de la banni√®re s'affichent correctement                                                                             |    ‚úÖ    |  ‚úÖ  |   ‚úÖ    |    ‚úÖ    |
| Le design est responsive                                                                                                       |    ‚úÖ    |  ‚úÖ  |   ‚úÖ    |    ‚úÖ    |
| Le titre "Mon [ blog ]." s'affiche correctement dans la banni√®re                                                               |    ‚úÖ    |  ‚úÖ  |   ‚úÖ    |    ‚úÖ    |
| Le texte de description s'affiche dans la banni√®re                                                                             |    ‚úÖ    |  ‚úÖ  |   ‚úÖ    |    ‚úÖ    |
| Le bouton "Consulter mes articles" est visible dans la banni√®re                                                                |    ‚úÖ    |  ‚úÖ  |   ‚úÖ    |    ‚úÖ    |
| Le bouton "Consulter mes articles" redirige vers le premier article                                                            |          |      |   ‚úÖ    |    ‚úÖ    |
| L'image de banni√®re s'affiche                                                                                                  |    ‚úÖ    |  ‚úÖ  |   ‚úÖ    |    ‚úÖ    |
| La liste des articles consultables s‚Äôaffiche correctement                                                                      |    ‚úÖ    |  ‚úÖ  |   ‚úÖ    |    ‚úÖ    |
| Chaque article affiche son titre                                                                                               |    ‚úÖ    |  ‚úÖ  |   ‚úÖ    |    ‚úÖ    |
| Chaque article affiche un extrait (et non le titre dupliqu√©)                                                                   |    ‚úÖ    |      |   ‚úÖ    |    ‚úÖ    |
| Chaque article affiche son image                                                                                               |    ‚úÖ    |  ‚úÖ  |   ‚úÖ    |    ‚úÖ    |
| Les articles alternent entre orientation gauche/droite                                                                         |    ‚úÖ    |  ‚úÖ  |   ‚úÖ    |    ‚úÖ    |
| Le bouton "Lire la suite" est pr√©sent pour chaque article                                                                      |    ‚úÖ    |  ‚úÖ  |   ‚úÖ    |    ‚úÖ    |
| Le bouton "Lire la suite" renvoie correctement vers la page de l‚Äôarticle concern√©                                              |    ‚úÖ    |  ‚úÖ  |   ‚úÖ    |    ‚úÖ    |
| Le titre de l'article s'affiche correctement sur la page de l‚Äôarticle                                                          |    ‚úÖ    |  ‚úÖ  |   ‚úÖ    |    ‚úÖ    |
| Le texte complet s'affiche sur la page de l‚Äôarticle                                                                            |    ‚úÖ    |  ‚úÖ  |   ‚úÖ    |    ‚úÖ    |
| L'image s'affiche sur la page de l‚Äôarticle                                                                                     |    ‚úÖ    |  ‚úÖ  |   ‚úÖ    |    ‚úÖ    |
| Le bouton "Revenir √† l'accueil" est pr√©sent sur la page de l‚Äôarticle                                                           |    ‚úÖ    |  ‚úÖ  |   ‚úÖ    |    ‚úÖ    |
| Le bouton "Revenir √† l'accueil" redirige vers l‚Äôaccueil sur la page de l‚Äôarticle                                               |    ‚úÖ    |  ‚úÖ  |   ‚úÖ    |    ‚úÖ    |
| Le bouton "Se connecter" s‚Äôaffiche sur la page d‚Äôaccueil et sur la page d‚Äôun article ouvert                                    |    ‚úÖ    |  ‚úÖ  |   ‚úÖ    |    ‚úÖ    |
| Le formulaire de connexion s‚Äôouvre quand on clique sur "Se connecter"                                                          |    ‚úÖ    |  ‚úÖ  |   ‚úÖ    |    ‚úÖ    |
| Le formulaire de connexion s'affiche correctement                                                                              |    ‚úÖ    |  ‚úÖ  |   ‚úÖ    |    ‚úÖ    |
| Les champs "Nom d'utilisateur" et "Mot de passe" sont pr√©sents dans le formulaire de connexion                                 |    ‚úÖ    |  ‚úÖ  |   ‚úÖ    |    ‚úÖ    |
| Le bouton "Se connecter" est pr√©sent                                                                                           |    ‚úÖ    |  ‚úÖ  |   ‚úÖ    |    ‚úÖ    |
| Le bouton "Revenir √† l'accueil" dans le formulaire de connexion fonctionne                                                     |    ‚úÖ    |  ‚úÖ  |   ‚úÖ    |    ‚úÖ    |
| Connexion r√©ussie avec login: _UEL311_ et password: _U31311_                                                                   |    ‚úÖ    |  ‚úÖ  |   ‚úÖ    |    ‚úÖ    |
| Apr√®s connexion r√©ussie, redirection vers l'accueil mais avec le bouton "Se d√©connecter" qui appara√Æt en haut √† droite         |    ‚úÖ    |  ‚úÖ  |   ‚úÖ    |    ‚úÖ    |
| Connexion avec mauvais login/password affiche le message "Mauvais login ou mot de passe"                                       |    ‚úÖ    |  ‚úÖ  |   ‚úÖ    |    ‚úÖ    |
| Il est impossible de r√©cup√©rer lors de la connexion le mot de passe depuis l'inspecteur du navigateur.                         |          |      |         |    ‚úÖ    |
| Cliquer sur ¬´ Se d√©connecter ¬ª d√©clenche la d√©connexion et redirige vers l'accueil avec le bouton qui change en "Se connecter" |    ‚úÖ    |  ‚úÖ  |   ‚úÖ    |    ‚úÖ    |

## Bilan
Les objectifs fix√©s pour cette semaine ont √©t√© atteints dans leur int√©gralit√©. Le blog a √©t√© rendu fonctionnel, avec un affichage correct des articles, des images et des √©l√©ments interactifs, ainsi qu‚Äôun formulaire de connexion op√©rationnel et s√©curis√©. Toutes les fonctionnalit√©s ont √©t√© test√©es manuellement et valid√©es sur les diff√©rentes branches.

Chaque membre du groupe a fait preuve d‚Äôimplication dans le travail demand√©. Les √©changes ont √©t√© r√©guliers, que ce soit en visio de code review sur Teams ou via les communications sur WhatsApp. √Ä la demande de Mathilde Chauvet, Filippos Katsanos a partag√© ses connaissances sur la ma√Ætrise de l‚Äôoutil Xdebug, renfor√ßant ainsi les comp√©tences collectives sur le d√©bogage c√¥t√© serveur.

L‚Äôensemble du groupe ma√Ætrise la m√©thodologie de d√©bogage c√¥t√© serveur pour les fichiers PHP :
- pr√©paration de l‚Äôenvironnement PHP ;
- activation de l‚Äôaffichage des erreurs sur un navigateur ;
- journalisation des logs ;
- s√©paration claire entre le code de traitement et le code d‚Äôaffichage pour faciliter le suivi des erreurs et am√©liorer la lisibilit√© ;
- utilisation de var_dump() et print_r() pour inspecter les variables et structures de donn√©es, et de file_exists() ou error_log() pour confirmer l‚Äôexistence des fichiers.
- s√©curisation du traitement du code susceptible de lancer des exceptions avec des blocs try/catch ;
- utilisation d‚Äôoutils d‚Äôanalyse d‚Äôerreurs comme Xdebug ;
- ajout de commentaires pour documenter chaque manipulation de debug, facilitant leur suppression avant la mise en production.

M√™me si le projet a √©t√© r√©alis√© dans un d√©lai restreint et avec un nombre limit√© de fichiers, le groupe pourrait encore am√©liorer son efficacit√© en approfondissant la ma√Ætrise de certains outils et pratiques de d√©bogage :
- exploitation avanc√©e de l‚Äôapplication Xdebug pour tracer et analyser l‚Äôex√©cution du code ;
- utilisation compl√®te de l‚Äôextension FirePHP pour suivre les logs directement dans la console du navigateur ;
- manipulation r√©guli√®re des commandes PHP telles que var_dump(), print_r() et error_log() pour un diagnostic plus pr√©cis et un suivi cibl√© des √©v√©nements ;
- int√©gration de solutions de tests unitaires, qui n‚Äôont pas √©t√© employ√©es pour ce projet, afin de garantir la robustesse et la maintenabilit√© du code sur le long terme.
